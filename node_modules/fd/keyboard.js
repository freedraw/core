var platform = require('fd/platform')
var emitter = require('fd/emitter')

exports.alt = false
exports.shift = false
exports.ctrl = false
exports.meta = false
exports.super = false
emitter(exports)

function update(e) {
  var alt = e.altKey
  var shift = e.shiftKey
  var ctrl = e.ctrlKey
  var meta = e.metaKey
  var sup = platform.isOSX ? e.metaKey : e.ctrlKey
  var changed = alt !== exports.alt || shift !== exports.shift || ctrl !== exports.ctrl || meta !== exports.meta
  if (!changed) return
  exports.alt = alt
  exports.shift = shift
  exports.ctrl = ctrl
  exports.meta = meta
  exports.super = sup
  exports.emit('modifiersChange')
}

document.addEventListener('keydown', update, true)
document.addEventListener('keyup', update, true)
addEventListener('focus', update, true)
